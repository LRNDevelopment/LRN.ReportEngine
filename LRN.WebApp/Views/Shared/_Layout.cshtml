<!DOCTYPE html>
@{
    var currentController = ViewContext.RouteData.Values["controller"]?.ToString();
    var currentAction = ViewContext.RouteData.Values["action"]?.ToString();
}
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>LRN - Report App</title>
    <link href="~/css/bootstrap.min.css" rel="stylesheet" />
    <link href="~/css/site.css" rel="stylesheet" />

</head>
<body>
    <nav class="navbar" style="display:flex;align-items:center;position:relative;">
        <!-- Left Section -->
        <div class="navbar-left" style="display:flex;align-items:center;">
            <span class="logo">
                <img src="~/image/lrn_logo.png" alt="LRN Logo" style="height:55px;width:100px;padding-left: 8px;" />
            </span>

            <a href="@Url.Action("Index", "Upload")"
               class="nav-link @(currentAction == "Index" && currentController == "Upload" ? "active" : "")">
                Upload
            </a>
            @if (ViewBag.LabName != "LRN Master")
            {
                <a href="@Url.Action("DownloadReport", "Upload")"
                   class="nav-link @(currentAction == "DownloadReport" && currentController == "Upload" ? "active" : "")">
                    Reports
                </a>
            }
          @*   <a href="@Url.Action("MasterImport", "Upload")"
               class="nav-link @(currentAction == "MasterImport" && currentController == "Upload" ? "active" : "")">
                Master Import
            </a> *@
        </div>

        <!-- Center Section -->
        <div style="
        position: absolute;
        left: 50%;
        transform: translateX(-50%);
        color: #fff;
        font-weight: 600;
        font-size: 35px;
        white-space: nowrap;
    ">
            @ViewBag.LabName
        </div>

        <!-- Right Section -->
        <div class="navbar-right" style="margin-left:auto;padding-right:15px;">
            <a href="@Url.Action("Logout", "Account")"
               class="nav-link logout @(currentAction == "Logout" && currentController == "Account" ? "active" : "")">
                Logout
            </a>
        </div>
    </nav>

    <div class="main-container">
        @RenderBody()
    </div>
    <script>
        function formatLocalNoTz(utcIso) {
          if (!utcIso) return "";
          const d = new Date(utcIso);

          // No "GMT+8" because we DO NOT include timeZoneName
          return new Intl.DateTimeFormat(undefined, {
            day: "2-digit",
            month: "short",
            year: "numeric",
            hour: "2-digit",
            minute: "2-digit",
            hour12: true
          }).format(d).replace(",", "");
        }

        document.querySelectorAll(".js-local-dt").forEach(el => {
          const utcIso = el.getAttribute("data-utc");
          el.textContent = formatLocalNoTz(utcIso);
        });

        // (Optional) If you want to see what timezone browser detected:
        // console.log("Browser TZ:", Intl.DateTimeFormat().resolvedOptions().timeZone);
    </script>


</body>

</html>
